<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipart Generator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 20px; }
        textarea { width: 100%; height: 200px; }
        button { padding: 10px 20px; margin: 10px 0; }
        .flash { color: green; margin-bottom: 10px; }
    </style>
</head>
<body>
    <h2>Clipart Generator</h2>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for message in messages %}
            <p>{{ message }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    <form method="POST">
        <label>Enter clipart prompts (one per line):</label><br>
        <textarea name="prompts" placeholder="Cute cat clipart&#10;Birthday cake clipart"></textarea><br>
        <button type="submit">Generate Images</button>
    </form>
</body>
</html> -->



<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipart Generator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; }
        textarea { width: 100%; height: 150px; }
        button { padding: 10px 20px; margin: 10px 0; }
        .flash { color: green; margin-bottom: 10px; }
        .images { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
        .images img { width: 150px; height: 150px; object-fit: contain; border: 1px solid #ccc; padding: 5px; background: #f9f9f9; }
    </style>
</head>
<body>
    <h2>Clipart Generator</h2>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for message in messages %}
            <p>{{ message }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST">
        <label>Enter clipart prompts:</label><br>
        <textarea name="prompts" placeholder="Cute cat clipart&#10;Birthday cake clipart"></textarea><br>
        <button type="submit">Generate Images</button>
    </form>

    <h3>Generated Images:</h3>
    <div class="images">
        {% for image in images %}
            <img src="{{ url_for('static', filename='../created_images/' + image) }}" alt="{{ image }}">
        {% endfor %}
    </div>
</body>
</html> -->


<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipart Generator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; padding: 20px; }
        textarea { width: 100%; height: 150px; }
        button { padding: 10px 20px; margin: 10px 0; }
        .flash { color: green; margin-bottom: 10px; }
        .images { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
        .images img { width: 150px; height: 150px; object-fit: contain; border: 1px solid #ccc; padding: 5px; background: #f9f9f9; cursor: pointer; }
    </style>
</head>
<body>
    <h2>Clipart Generator</h2>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash">
          {% for message in messages %}
            <p>{{ message }}</p>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST">
        <label>Enter clipart prompts (one per line):</label><br>
        <textarea name="prompts" placeholder="Cute cat clipart&#10;Birthday cake clipart"></textarea><br>
        <button type="submit">Generate Images</button>
    </form>

    {% if images %}
        <h3>Generated Images:</h3>
        <div class="images">
            {% for image in images %}
                <a href="{{ url_for('serve_image', filename=image) }}" target="_blank">
                    <img src="{{ url_for('serve_image', filename=image) }}" alt="{{ image }}">
                </a>
            {% endfor %}
        </div>
    {% endif %}
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipart Generator</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: auto; padding: 20px; background: #f7f7f7; }
        h2 { color: #333; }
        textarea { width: 100%; height: 120px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
        button { padding: 10px 20px; border: none; border-radius: 5px; background: #4CAF50; color: white; cursor: pointer; }
        button:hover { background: #45a049; }
        .images { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
        .images img { width: 150px; height: 150px; object-fit: contain; border-radius: 5px; border: 1px solid #ccc; padding: 5px; background: white; cursor: pointer; transition: transform 0.2s; }
        .images img:hover { transform: scale(1.05); }
        .flash { color: green; margin: 10px 0; }
    </style>
</head>
<body>
    <h2>Clipart Generator</h2>

    <label>Enter clipart prompts (one per line):</label><br>
    <textarea id="prompts" placeholder="Cute cat clipart&#10;Birthday cake clipart"></textarea><br>
    <button onclick="generateImages()">Generate Images</button>

    <div id="flash" class="flash"></div>

    <h3>Generated Images:</h3>
    <div class="images" id="images"></div>
    <script>
async function generateImages() {
    const promptText = document.getElementById("prompts").value;
    const prompts = promptText.split("\n").filter(p => p.trim() !== "");
    const imagesDiv = document.getElementById("images");
    imagesDiv.innerHTML = ""; // Clear previous images
    document.getElementById("flash").innerText = "";

    if (prompts.length === 0) {
        document.getElementById("flash").innerText = "Please enter at least one prompt!";
        return;
    }

    for (let i = 0; i < prompts.length; i++) {
        const prompt = prompts[i];
        document.getElementById("flash").innerText = `Generating image ${i + 1} of ${prompts.length}...`;

        try {
            const res = await fetch("/generate_image", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ prompt: prompt, idx: i + 1 })
            });
            const data = await res.json();

            if (data.filename) {
                const img = document.createElement("img");
                img.src = `/created_images/${data.filename}`;
                img.alt = prompt;
                img.onclick = () => window.open(img.src, "_blank");
                imagesDiv.appendChild(img);
            } else {
                console.error(data.error);
            }
        } catch (err) {
            console.error(err);
        }
    }

    document.getElementById("flash").innerText = "All images generated!";
}
</script>

   
</body>
</html>